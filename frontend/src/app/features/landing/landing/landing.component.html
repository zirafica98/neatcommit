<div class="landing" [class.menu-open]="mobileMenuOpen">
  <header class="landing-header" role="banner">
    <a routerLink="/" class="logo" aria-label="NeatCommit home">
      <mat-icon aria-hidden="true">security</mat-icon>
      <span>NeatCommit</span>
    </a>
    <button type="button" class="menu-toggle" aria-label="Toggle menu" [attr.aria-expanded]="mobileMenuOpen" (click)="mobileMenuOpen = !mobileMenuOpen">
      <mat-icon aria-hidden="true">{{ mobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
    </button>
    <div class="nav-overlay" [class.open]="mobileMenuOpen" (click)="closeMobileMenu()">
      <nav class="nav" aria-label="Main navigation" (click)="$event.stopPropagation()">
        <a href="#features" (click)="closeMobileMenu()">Features</a>
        <a href="#how-it-works" (click)="closeMobileMenu()">How it works</a>
        <a href="#pricing" (click)="closeMobileMenu()">Pricing</a>
        <a routerLink="/docs" (click)="closeMobileMenu()">Documentation</a>
        <a routerLink="/news" (click)="closeMobileMenu()">News</a>
        <a href="#faq" (click)="closeMobileMenu()">FAQ</a>
        <a routerLink="/auth/login" class="btn-start" mat-flat-button color="primary" (click)="closeMobileMenu()">
          Get started
        </a>
      </nav>
    </div>
  </header>

  <main id="main-content">
  <section class="hero" aria-labelledby="hero-heading">
    <div class="hero-content">
      <h1 class="hero-title" id="hero-heading">
        Code reviews that <span class="gradient-text">secure</span> your repo
      </h1>
      <p class="hero-subtitle">
        NeatCommit analyzes every pull request for security issues and best practices.
        Install the GitHub App, open a PR, get results in minutes.
      </p>
      <div class="hero-actions">
        <a routerLink="/auth/login" mat-raised-button color="primary" class="hero-cta">
          Start for free
          <mat-icon>arrow_forward</mat-icon>
        </a>
        <a href="#features" mat-stroked-button class="hero-secondary">
          See how it works
        </a>
      </div>
    </div>
    <div class="hero-visual">
      <div class="hero-card">
        <div class="hero-card-header">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
        <div class="hero-card-body">
          <div class="mock-line"></div>
          <div class="mock-line short"></div>
          <div class="mock-line"></div>
          <div class="mock-badge">Security score: 87</div>
        </div>
      </div>
    </div>
  </section>

  <section id="features" class="features" aria-labelledby="features-heading">
    <h2 id="features-heading" class="section-title">Built for modern teams</h2>
    <p class="section-subtitle">One GitHub App. Fewer bugs. Better code.</p>
    <div class="features-grid">
      <article *ngFor="let f of features" class="feature-card">
        <div class="feature-icon">
          <mat-icon>{{ f.icon }}</mat-icon>
        </div>
        <h3>{{ f.title }}</h3>
        <p>{{ f.description }}</p>
      </article>
    </div>
  </section>

  <section id="pricing" class="pricing" aria-labelledby="pricing-heading">
    <h2 id="pricing-heading" class="section-title">Simple pricing</h2>
    <p class="section-subtitle">Start free, upgrade when you need more.</p>

    <div *ngIf="plansLoading" class="pricing-loading">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      <p>Loading plans…</p>
    </div>
    <div *ngIf="plansError" class="pricing-error">
      <mat-icon>error_outline</mat-icon>
      <p>{{ plansError }}</p>
    </div>

    <div *ngIf="!plansLoading && !plansError && plans.length" class="pricing-grid">
      <article
        *ngFor="let plan of plans"
        class="pricing-card"
        [class.featured]="plan.id === 'PRO'"
      >
        <span *ngIf="plan.id === 'PRO'" class="badge-popular">Popular</span>
        <div
          class="plan-badge"
          [class.free]="plan.id === 'FREE'"
          [class.pro]="plan.id === 'PRO'"
          [class.enterprise]="plan.id === 'ENTERPRISE'"
        >
          <mat-icon>{{ plan.id === 'FREE' ? 'free_breakfast' : plan.id === 'PRO' ? 'workspace_premium' : 'business' }}</mat-icon>
        </div>
        <h3>{{ plan.name }}</h3>
        <div class="plan-price">
          <span class="price">{{ getPlanPriceDisplay(plan) }}</span>
          <span class="interval">{{ getPlanIntervalDisplay(plan) }}</span>
        </div>
        <ul class="plan-features">
          <li *ngFor="let feature of plan.features">
            <mat-icon>check_circle</mat-icon>
            <span>{{ feature }}</span>
          </li>
        </ul>
        <a
          *ngIf="plan.id === 'PRO'"
          routerLink="/auth/login"
          mat-raised-button
          color="primary"
          class="pricing-cta"
        >
          Get started
        </a>
        <a
          *ngIf="plan.id !== 'PRO'"
          routerLink="/auth/login"
          mat-stroked-button
          class="pricing-cta"
        >
          {{ plan.id === 'ENTERPRISE' ? 'Contact us' : 'Get started' }}
        </a>
      </article>
    </div>
  </section>

  <section id="how-it-works" class="how" aria-labelledby="how-heading">
    <h2 id="how-heading" class="section-title">How it works</h2>
    <div class="steps">
      <div class="step">
        <span class="step-num">1</span>
        <h3>Install the GitHub App</h3>
        <p>Connect your account and choose repositories. No code changes needed.</p>
      </div>
      <div class="step">
        <span class="step-num">2</span>
        <h3>Open a pull request</h3>
        <p>We analyze the diff automatically. Results appear in the NeatCommit dashboard.</p>
      </div>
      <div class="step">
        <span class="step-num">3</span>
        <h3>Review and ship</h3>
        <p>See security scores, issues by severity, and suggested fixes. Merge with confidence.</p>
      </div>
    </div>
    <div class="how-cta">
      <a routerLink="/auth/login" mat-raised-button color="primary" class="big-cta">
        Get started with NeatCommit
        <mat-icon>arrow_forward</mat-icon>
      </a>
    </div>
  </section>

  <section id="documentation" class="documentation" aria-labelledby="docs-heading">
    <h2 id="docs-heading" class="section-title">Documentation</h2>
    <p class="section-subtitle">Learn what the app can do, how it works, and how it’s built.</p>
    <div class="doc-content">
      <p class="doc-text">
        Full documentation for developers: overview, how it works, tech stack, API reference, and frontend components.
      </p>
      <div class="doc-actions">
        <a routerLink="/docs" mat-raised-button color="primary" class="doc-btn">
          <mat-icon>menu_book</mat-icon>
          Open documentation
        </a>
      </div>
    </div>
  </section>

  <section id="faq" class="faq" aria-labelledby="faq-heading">
    <h2 id="faq-heading" class="section-title">Frequently asked questions</h2>
    <div class="faq-list">
      <div *ngFor="let item of faqItems" class="faq-item">
        <button type="button" class="faq-question" (click)="toggleFaq(item)" [attr.aria-expanded]="item.open">
          <span>{{ item.question }}</span>
          <mat-icon>{{ item.open ? 'expand_less' : 'expand_more' }}</mat-icon>
        </button>
        <div class="faq-answer" [class.open]="item.open">
          <p>{{ item.answer }}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="footer-cta" aria-labelledby="cta-heading">
    <h2 id="cta-heading">Ready to improve your code quality?</h2>
    <p>Join developers who ship safer code with every PR.</p>
    <a routerLink="/auth/login" mat-raised-button color="primary" class="big-cta">
      Start for free
      <mat-icon>arrow_forward</mat-icon>
    </a>
  </section>

  </main>

  <footer class="landing-footer" role="contentinfo">
    <div class="footer-inner">
      <a routerLink="/" class="logo-small" aria-label="NeatCommit home">
        <mat-icon aria-hidden="true">security</mat-icon>
        <span>NeatCommit</span>
      </a>
      <nav class="footer-links" aria-label="Footer navigation">
        <a routerLink="/docs">Documentation</a>
        <a routerLink="/news">News</a>
      </nav>
      <p class="copyright">&copy; {{ currentYear }} NeatCommit. All rights reserved.</p>
    </div>
  </footer>
</div>
